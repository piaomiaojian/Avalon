阿瓦隆遊戲 - 遊戲玩法流程
==========================

1. 遊戲準備階段
===============
1.1 房間創建
- 房主點擊「創建房間」
- 系統生成WebRTC連接
- 顯示QR碼供其他玩家掃描

1.2 玩家加入
- 玩家掃描房主QR碼
- 建立WebRTC連接
- 自動加入房間區域

1.3 人數檢查
- 支援人數：5-10人
- 人數不足：顯示等待訊息
- 人數過多：顯示房間已滿
- 人數適中：顯示準備開始

2. 遊戲開始階段
===============
2.1 角色分配
- 房主點擊「開始遊戲」
- 系統根據人數選擇角色配置
- 隨機分配角色給所有玩家
- 每個玩家收到自己的角色卡片

2.2 角色配置（根據人數）
5人：梅林、派西維爾、忠誠僕人、莫甘娜、刺客
6人：梅林、派西維爾、忠誠僕人×2、莫甘娜、刺客
7人：梅林、派西維爾、忠誠僕人×2、莫甘娜、奧伯倫、刺客
8人：梅林、派西維爾、忠誠僕人×3、莫甘娜、莫德雷德、刺客
9人：梅林、派西維爾、忠誠僕人×4、莫甘娜、莫德雷德、刺客
10人：梅林、派西維爾、忠誠僕人×4、莫甘娜、莫德雷德、奧伯倫、刺客

3. 遊戲進行階段
===============
3.1 任務輪次
遊戲共進行5輪任務，每輪流程：

3.2 組隊階段
- 隊長選擇任務成員
- 成員數量根據輪次和總人數決定
- 所有玩家對隊伍進行投票

3.3 投票階段
- 隊伍獲得過半數贊成票才能執行任務
- 如果投票失敗，隊長輪換，重新組隊
- 連續5次投票失敗，壞人直接獲勝

3.4 任務執行
- 隊伍成員秘密投票
- 好人必須投贊成票
- 壞人可以投贊成或反對票
- 只要有一票反對，任務就失敗

3.5 結果公佈
- 公佈任務成功或失敗
- 更新任務進度
- 檢查遊戲是否結束

4. 特殊角色能力
================
4.1 好人陣營
梅林 (Merlin)：
- 知道所有壞人身份（除了莫德雷德）
- 在玩家頭像上顯示紅點標記壞人

派西維爾 (Percival)：
- 知道梅林和莫甘娜的身份
- 需要分辨誰是真正的梅林

忠誠的僕人 (Loyal Servant)：
- 普通好人，沒有特殊能力
- 只能投贊成票

4.2 壞人陣營
莫甘娜 (Morgana)：
- 假裝是梅林來迷惑派西維爾
- 在派西維爾眼中顯示為梅林

莫德雷德 (Mordred)：
- 梅林看不到他的身份
- 對梅林來說是隱形的壞人

奧伯倫 (Oberon)：
- 不知道其他壞人的身份
- 其他壞人也不知道他的身份

刺客 (Assassin)：
- 遊戲結束後可以刺殺梅林
- 如果刺殺成功，壞人最終獲勝

5. 遊戲結束條件
================
5.1 正常結束
- 好人陣營：3次任務成功
- 壞人陣營：3次任務失敗

5.2 特殊結束
- 連續5次投票失敗：壞人直接獲勝
- 刺殺階段：壞人獲勝後可刺殺梅林

6. 刺殺階段（如果壞人獲勝）
============================
6.1 刺殺機會
- 壞人陣營獲勝後
- 刺客可以選擇一名玩家刺殺
- 如果刺殺的是梅林，壞人最終獲勝
- 如果刺殺的不是梅林，好人最終獲勝

6.2 刺殺結果
- 公佈刺殺目標
- 公佈最終勝負
- 顯示所有玩家角色

7. 遊戲統計
============
7.1 任務統計
- 每輪任務結果
- 成功/失敗次數
- 參與成員

7.2 投票統計
- 每輪投票結果
- 贊成/反對票數
- 投票成功率

7.3 玩家統計
- 玩家角色分配
- 陣營分布
- 遊戲表現

8. 遊戲規則細節
================
8.1 投票規則
- 組隊投票：需要過半數贊成
- 任務投票：秘密進行
- 好人必須投贊成
- 壞人可以自由選擇

8.2 隊長輪換
- 每輪任務後輪換隊長
- 按玩家順序輪流擔任
- 房主也是玩家之一

8.3 任務成員數量
5人：2-3-2-3-3
6人：2-3-4-3-4
7人：2-3-3-4-4
8人：3-4-4-5-5
9人：3-4-4-5-5
10人：3-4-4-5-5

8.4 勝利條件
- 好人：3次任務成功
- 壞人：3次任務失敗 或 刺殺梅林成功

9. 遊戲平衡性
==============
9.1 角色平衡
- 好人略多於壞人
- 特殊角色能力互補
- 資訊不對稱設計

9.2 策略深度
- 組隊策略
- 投票策略
- 身份隱藏
- 資訊推理

9.3 遊戲節奏
- 每輪時間控制
- 投票時間限制
- 討論時間管理 